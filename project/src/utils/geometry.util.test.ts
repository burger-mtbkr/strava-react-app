import {
  decodePolyline,
  getPointArrayBounds,
  getEncodedPolylineBounds,
  getEncodedPolylineCenter,
} from './geometry.util';

describe(`${decodePolyline.name}`, () => {
  const encodedPolyline =
    'g_lyHjxMh@|@ZPnKD~@\\l@p@Np@?xDg@jKHh@`AfDd@hEEjCoCza@WjBy@~D{BhSu@pJO`EUvYHdCh@xFHjCGhQJrHKj_@VfHx@|JfBbKz@zDn@pB~@~BvCfF~DvCtCvAb@f@Jf@A~@gDlY@b@`@`ABv@c@dCm@bKGrCXxAnIz[dCzIKj@Y^uM~LBv@Rp@nEpLvIbT|D|H|B~Gn@bENnDFvGn@~FfAtMZlKfAfIp@tCf@hA`GtHjCpFZP\\Ib@q@p@qCbAgIFkCVe@bB}@Dw@MuCNo@pToE`Fo@XSBU?cCXYx@L\\dBTNtIgBdOqXdJyQX_BFmAEaM`@kKj@eI|AcPFeDQaEg@yDcDg\\_@cC_@aBu@}AcBoAsCwAkCcCmA_CoC}Hq@eAoJ_IwAs@}B_@mIF{DT_KtAcEJ{EnA_HCQt@?`Dg@~N?~BfDrs@Ij@_@l@sCxCYP{AA]p@?fFu@hf@?~HGn@[PSa@E{Cv@gh@DeJR}A?m@mOsg@uH_VsA}Es@_AkA]e@qBO_@e@CwA^a@SI_ALoDGm@}@oBiDcJmBuFkAsE@[JS\\RtDtLjJvUhAp@r@l@tAUrIkDlIqArVH`FmAxFW~ImAtJ[xDHpC~@lK|IpAlC~AfF`BtCvBlB~DxBtA|Ad@zAn@pDtExc@L~CCfCkCxYe@hMBbMOnB]lAaCfE_ElIaHpMeGrKmIfBg@[S{AYU_@BU\\D|BGT[VgFt@oTjEGf@LvCCj@U\\mAh@SVMx@@pA}@dIeAzDa@`@e@FYSsC}FuFeHo@{Aw@sD_AkH_@{KaAmLs@mGQgLUaC[{AgCsHiC_FgKeWoCgHwAoEDi@XYpM{LJY?]uAmEoIy[_AyDI_Av@cOd@gCEe@c@{@Em@pDmZCa@g@{@uCuAmDgCo@q@cAeBoDiJwBwKeAiIa@cGQeFH}`@IkKFmMEaCu@cKTuY\\iHl@oHhB{PlA{GV}BjC_a@?kCMcB_@kBaAeDJoEVqBDcFSmDu@}EFy@\\gAv@wAd@OpAFjKfB`VpOPALSt@qELM^DzGlDLXQxBLNrBfApAVp@Ml@c@\\cAPgBGqAWiASk@_AkAUw@XqHXuCfC\\XXFb@YvCBrAr@dDp@tA\\Vd@Yb@gATuBDmCNy@^_Af@}@v@}@lAE`Ah@nA`BhArDr@zDTbFOnP@fBHn@v@nB`@TXAVOd@q@pAoD';

  const expetedPathJSON =
    '[{"lat":51.51236,"lng":-0.07574},{"lat":51.51215,"lng":-0.07605},{"lat":51.51201,"lng":-0.07614},{"lat":51.51001,"lng":-0.07617},{"lat":51.50969,"lng":-0.07632},{"lat":51.50946,"lng":-0.07657},{"lat":51.50938,"lng":-0.07682},{"lat":51.50938,"lng":-0.07775},{"lat":51.50958,"lng":-0.07973},{"lat":51.50953,"lng":-0.07994},{"lat":51.5092,"lng":-0.08078},{"lat":51.50901,"lng":-0.08179},{"lat":51.50904,"lng":-0.08249},{"lat":51.50976,"lng":-0.08807},{"lat":51.50988,"lng":-0.08861},{"lat":51.51017,"lng":-0.08957},{"lat":51.51079,"lng":-0.09282},{"lat":51.51106,"lng":-0.09467},{"lat":51.51114,"lng":-0.09564},{"lat":51.51125,"lng":-0.09992},{"lat":51.5112,"lng":-0.10059},{"lat":51.51099,"lng":-0.10184},{"lat":51.51094,"lng":-0.10254},{"lat":51.51098,"lng":-0.10547},{"lat":51.51092,"lng":-0.10701},{"lat":51.51098,"lng":-0.11219},{"lat":51.51086,"lng":-0.11367},{"lat":51.51057,"lng":-0.11558},{"lat":51.51005,"lng":-0.11752},{"lat":51.50975,"lng":-0.11846},{"lat":51.50951,"lng":-0.11903},{"lat":51.50919,"lng":-0.11967},{"lat":51.50843,"lng":-0.12083},{"lat":51.50747,"lng":-0.12159},{"lat":51.50672,"lng":-0.12203},{"lat":51.50654,"lng":-0.12223},{"lat":51.50648,"lng":-0.12243},{"lat":51.50649,"lng":-0.12275},{"lat":51.50733,"lng":-0.12698},{"lat":51.50732,"lng":-0.12716},{"lat":51.50715,"lng":-0.12749},{"lat":51.50713,"lng":-0.12777},{"lat":51.50731,"lng":-0.12844},{"lat":51.50754,"lng":-0.13038},{"lat":51.50758,"lng":-0.13112},{"lat":51.50745,"lng":-0.13157},{"lat":51.50577,"lng":-0.13619},{"lat":51.5051,"lng":-0.13793},{"lat":51.50516,"lng":-0.13815},{"lat":51.50529,"lng":-0.13831},{"lat":51.50764,"lng":-0.14055},{"lat":51.50762,"lng":-0.14083},{"lat":51.50752,"lng":-0.14108},{"lat":51.50648,"lng":-0.14325},{"lat":51.50476,"lng":-0.14663},{"lat":51.50381,"lng":-0.14822},{"lat":51.50318,"lng":-0.14966},{"lat":51.50294,"lng":-0.15064},{"lat":51.50286,"lng":-0.15152},{"lat":51.50282,"lng":-0.15292},{"lat":51.50258,"lng":-0.1542},{"lat":51.50222,"lng":-0.15655},{"lat":51.50208,"lng":-0.15854},{"lat":51.50172,"lng":-0.16018},{"lat":51.50147,"lng":-0.16093},{"lat":51.50127,"lng":-0.1613},{"lat":51.49998,"lng":-0.16285},{"lat":51.49928,"lng":-0.16406},{"lat":51.49914,"lng":-0.16415},{"lat":51.49899,"lng":-0.1641},{"lat":51.49881,"lng":-0.16385},{"lat":51.49856,"lng":-0.16312},{"lat":51.49822,"lng":-0.16148},{"lat":51.49818,"lng":-0.16078},{"lat":51.49806,"lng":-0.16059},{"lat":51.49756,"lng":-0.16028},{"lat":51.49753,"lng":-0.16},{"lat":51.4976,"lng":-0.15925},{"lat":51.49752,"lng":-0.15901},{"lat":51.49407,"lng":-0.15797},{"lat":51.49294,"lng":-0.15773},{"lat":51.49281,"lng":-0.15763},{"lat":51.49279,"lng":-0.15752},{"lat":51.49279,"lng":-0.15686},{"lat":51.49266,"lng":-0.15673},{"lat":51.49237,"lng":-0.1568},{"lat":51.49222,"lng":-0.15731},{"lat":51.49211,"lng":-0.15739},{"lat":51.4904,"lng":-0.15687},{"lat":51.48781,"lng":-0.15278},{"lat":51.48602,"lng":-0.14977},{"lat":51.48589,"lng":-0.14929},{"lat":51.48585,"lng":-0.1489},{"lat":51.48588,"lng":-0.14665},{"lat":51.48571,"lng":-0.14467},{"lat":51.48549,"lng":-0.14304},{"lat":51.48502,"lng":-0.1403},{"lat":51.48498,"lng":-0.13947},{"lat":51.48507,"lng":-0.1385},{"lat":51.48527,"lng":-0.13757},{"lat":51.48609,"lng":-0.13289},{"lat":51.48625,"lng":-0.13223},{"lat":51.48641,"lng":-0.13174},{"lat":51.48668,"lng":-0.13127},{"lat":51.48718,"lng":-0.13087},{"lat":51.48792,"lng":-0.13043},{"lat":51.48862,"lng":-0.12977},{"lat":51.48901,"lng":-0.12913},{"lat":51.48973,"lng":-0.12754},{"lat":51.48998,"lng":-0.12719},{"lat":51.49182,"lng":-0.12559},{"lat":51.49226,"lng":-0.12533},{"lat":51.49289,"lng":-0.12517},{"lat":51.49456,"lng":-0.12521},{"lat":51.4955,"lng":-0.12532},{"lat":51.49742,"lng":-0.12575},{"lat":51.4984,"lng":-0.12581},{"lat":51.4995,"lng":-0.12621},{"lat":51.50094,"lng":-0.12619},{"lat":51.50103,"lng":-0.12646},{"lat":51.50103,"lng":-0.12727},{"lat":51.50123,"lng":-0.12983},{"lat":51.50123,"lng":-0.13047},{"lat":51.50039,"lng":-0.13889},{"lat":51.50044,"lng":-0.13911},{"lat":51.5006,"lng":-0.13934},{"lat":51.50134,"lng":-0.14011},{"lat":51.50147,"lng":-0.1402},{"lat":51.50193,"lng":-0.14019},{"lat":51.50208,"lng":-0.14044},{"lat":51.50208,"lng":-0.1416},{"lat":51.50235,"lng":-0.14789},{"lat":51.50235,"lng":-0.14949},{"lat":51.50239,"lng":-0.14973},{"lat":51.50253,"lng":-0.14982},{"lat":51.50263,"lng":-0.14965},{"lat":51.50266,"lng":-0.14887},{"lat":51.50238,"lng":-0.14227},{"lat":51.50235,"lng":-0.14048},{"lat":51.50225,"lng":-0.14001},{"lat":51.50225,"lng":-0.13978},{"lat":51.50488,"lng":-0.13328},{"lat":51.50643,"lng":-0.1296},{"lat":51.50685,"lng":-0.12849},{"lat":51.50711,"lng":-0.12817},{"lat":51.50749,"lng":-0.12802},{"lat":51.50768,"lng":-0.12745},{"lat":51.50776,"lng":-0.12729},{"lat":51.50795,"lng":-0.12727},{"lat":51.50839,"lng":-0.12743},{"lat":51.50856,"lng":-0.12733},{"lat":51.50861,"lng":-0.12701},{"lat":51.50854,"lng":-0.12613},{"lat":51.50858,"lng":-0.1259},{"lat":51.50889,"lng":-0.12534},{"lat":51.50974,"lng":-0.12356},{"lat":51.51029,"lng":-0.12233},{"lat":51.51067,"lng":-0.12127},{"lat":51.51066,"lng":-0.12113},{"lat":51.5106,"lng":-0.12103},{"lat":51.51045,"lng":-0.12113},{"lat":51.50954,"lng":-0.12332},{"lat":51.50772,"lng":-0.12696},{"lat":51.50735,"lng":-0.12721},{"lat":51.50709,"lng":-0.12744},{"lat":51.50666,"lng":-0.12733},{"lat":51.50496,"lng":-0.12647},{"lat":51.50329,"lng":-0.12606},{"lat":51.49951,"lng":-0.12611},{"lat":51.49838,"lng":-0.12572},{"lat":51.49713,"lng":-0.1256},{"lat":51.49537,"lng":-0.12521},{"lat":51.4935,"lng":-0.12507},{"lat":51.49257,"lng":-0.12512},{"lat":51.49184,"lng":-0.12544},{"lat":51.48985,"lng":-0.12719},{"lat":51.48944,"lng":-0.1279},{"lat":51.48896,"lng":-0.12906},{"lat":51.48847,"lng":-0.12981},{"lat":51.48787,"lng":-0.13036},{"lat":51.48691,"lng":-0.13097},{"lat":51.48648,"lng":-0.13144},{"lat":51.48629,"lng":-0.1319},{"lat":51.48605,"lng":-0.13279},{"lat":51.48498,"lng":-0.13868},{"lat":51.48491,"lng":-0.13948},{"lat":51.48493,"lng":-0.14016},{"lat":51.48563,"lng":-0.14445},{"lat":51.48582,"lng":-0.14674},{"lat":51.4858,"lng":-0.149},{"lat":51.48588,"lng":-0.14956},{"lat":51.48603,"lng":-0.14995},{"lat":51.48668,"lng":-0.15095},{"lat":51.48764,"lng":-0.15262},{"lat":51.48909,"lng":-0.15495},{"lat":51.4904,"lng":-0.15697},{"lat":51.49207,"lng":-0.15749},{"lat":51.49227,"lng":-0.15735},{"lat":51.49237,"lng":-0.15689},{"lat":51.4925,"lng":-0.15678},{"lat":51.49266,"lng":-0.1568},{"lat":51.49277,"lng":-0.15695},{"lat":51.49274,"lng":-0.15758},{"lat":51.49278,"lng":-0.15769},{"lat":51.49292,"lng":-0.15781},{"lat":51.49408,"lng":-0.15808},{"lat":51.49752,"lng":-0.1591},{"lat":51.49756,"lng":-0.1593},{"lat":51.49749,"lng":-0.16006},{"lat":51.49751,"lng":-0.16028},{"lat":51.49762,"lng":-0.16043},{"lat":51.49801,"lng":-0.16064},{"lat":51.49811,"lng":-0.16076},{"lat":51.49818,"lng":-0.16105},{"lat":51.49817,"lng":-0.16146},{"lat":51.49848,"lng":-0.16309},{"lat":51.49883,"lng":-0.16403},{"lat":51.499,"lng":-0.1642},{"lat":51.49919,"lng":-0.16424},{"lat":51.49932,"lng":-0.16414},{"lat":51.50006,"lng":-0.16287},{"lat":51.50129,"lng":-0.1614},{"lat":51.50153,"lng":-0.16094},{"lat":51.50181,"lng":-0.16004},{"lat":51.50213,"lng":-0.15854},{"lat":51.50229,"lng":-0.15648},{"lat":51.50262,"lng":-0.15433},{"lat":51.50288,"lng":-0.15298},{"lat":51.50297,"lng":-0.15086},{"lat":51.50308,"lng":-0.15021},{"lat":51.50322,"lng":-0.14975},{"lat":51.5039,"lng":-0.14821},{"lat":51.50459,"lng":-0.14709},{"lat":51.50655,"lng":-0.14322},{"lat":51.50727,"lng":-0.14174},{"lat":51.50771,"lng":-0.1407},{"lat":51.50768,"lng":-0.14049},{"lat":51.50755,"lng":-0.14036},{"lat":51.50522,"lng":-0.13814},{"lat":51.50516,"lng":-0.13801},{"lat":51.50516,"lng":-0.13786},{"lat":51.50559,"lng":-0.13683},{"lat":51.50727,"lng":-0.13222},{"lat":51.50759,"lng":-0.13129},{"lat":51.50764,"lng":-0.13097},{"lat":51.50736,"lng":-0.12839},{"lat":51.50717,"lng":-0.12771},{"lat":51.5072,"lng":-0.12752},{"lat":51.50738,"lng":-0.12722},{"lat":51.50741,"lng":-0.12699},{"lat":51.50652,"lng":-0.1226},{"lat":51.50654,"lng":-0.12243},{"lat":51.50674,"lng":-0.12213},{"lat":51.50749,"lng":-0.1217},{"lat":51.50836,"lng":-0.12102},{"lat":51.5086,"lng":-0.12077},{"lat":51.50894,"lng":-0.12026},{"lat":51.50982,"lng":-0.11845},{"lat":51.51042,"lng":-0.11641},{"lat":51.51077,"lng":-0.11476},{"lat":51.51094,"lng":-0.11346},{"lat":51.51103,"lng":-0.11231},{"lat":51.51098,"lng":-0.10688},{"lat":51.51103,"lng":-0.1049},{"lat":51.51099,"lng":-0.10259},{"lat":51.51102,"lng":-0.10194},{"lat":51.51129,"lng":-0.1},{"lat":51.51118,"lng":-0.09573},{"lat":51.51103,"lng":-0.09424},{"lat":51.5108,"lng":-0.09272},{"lat":51.51027,"lng":-0.08986},{"lat":51.50988,"lng":-0.08844},{"lat":51.50976,"lng":-0.08781},{"lat":51.50906,"lng":-0.08237},{"lat":51.50906,"lng":-0.08167},{"lat":51.50913,"lng":-0.08117},{"lat":51.50929,"lng":-0.08063},{"lat":51.50962,"lng":-0.0798},{"lat":51.50956,"lng":-0.07876},{"lat":51.50944,"lng":-0.07819},{"lat":51.50941,"lng":-0.07705},{"lat":51.50951,"lng":-0.07618},{"lat":51.50978,"lng":-0.07507},{"lat":51.50974,"lng":-0.07478},{"lat":51.50959,"lng":-0.07442},{"lat":51.50931,"lng":-0.07398},{"lat":51.50912,"lng":-0.0739},{"lat":51.50871,"lng":-0.07394},{"lat":51.50673,"lng":-0.07446},{"lat":51.50304,"lng":-0.07711},{"lat":51.50295,"lng":-0.0771},{"lat":51.50288,"lng":-0.077},{"lat":51.50261,"lng":-0.07595},{"lat":51.50254,"lng":-0.07588},{"lat":51.50238,"lng":-0.07591},{"lat":51.50096,"lng":-0.07678},{"lat":51.50089,"lng":-0.07691},{"lat":51.50098,"lng":-0.07752},{"lat":51.50091,"lng":-0.0776},{"lat":51.50033,"lng":-0.07796},{"lat":51.49992,"lng":-0.07808},{"lat":51.49967,"lng":-0.07801},{"lat":51.49944,"lng":-0.07783},{"lat":51.49929,"lng":-0.07749},{"lat":51.4992,"lng":-0.07697},{"lat":51.49924,"lng":-0.07656},{"lat":51.49936,"lng":-0.07619},{"lat":51.49946,"lng":-0.07597},{"lat":51.49978,"lng":-0.07559},{"lat":51.49989,"lng":-0.07531},{"lat":51.49976,"lng":-0.07378},{"lat":51.49963,"lng":-0.07303},{"lat":51.49895,"lng":-0.07318},{"lat":51.49882,"lng":-0.07331},{"lat":51.49878,"lng":-0.07349},{"lat":51.49891,"lng":-0.07425},{"lat":51.49889,"lng":-0.07467},{"lat":51.49863,"lng":-0.0755},{"lat":51.49838,"lng":-0.07593},{"lat":51.49823,"lng":-0.07605},{"lat":51.49804,"lng":-0.07592},{"lat":51.49786,"lng":-0.07556},{"lat":51.49775,"lng":-0.07497},{"lat":51.49772,"lng":-0.07426},{"lat":51.49764,"lng":-0.07397},{"lat":51.49748,"lng":-0.07365},{"lat":51.49728,"lng":-0.07334},{"lat":51.497,"lng":-0.07303},{"lat":51.49661,"lng":-0.073},{"lat":51.49628,"lng":-0.07321},{"lat":51.49588,"lng":-0.0737},{"lat":51.49551,"lng":-0.0746},{"lat":51.49525,"lng":-0.07554},{"lat":51.49514,"lng":-0.07668},{"lat":51.49522,"lng":-0.07948},{"lat":51.49521,"lng":-0.08},{"lat":51.49516,"lng":-0.08024},{"lat":51.49488,"lng":-0.0808},{"lat":51.49471,"lng":-0.08091},{"lat":51.49458,"lng":-0.0809},{"lat":51.49446,"lng":-0.08082},{"lat":51.49427,"lng":-0.08057},{"lat":51.49386,"lng":-0.07969}]';

  const jsonBounds =
    '{"_southWest":{"lat":51.48491,"lng":-0.16424},"_northEast":{"lat":51.51236,"lng":-0.073}}';

  const jsonPolylineCenter = '{"lat":51.498635,"lng":-0.11862}';
  const polylineCenter = JSON.parse(jsonPolylineCenter);

  const bounds = JSON.parse(jsonBounds);

  const path = JSON.parse(expetedPathJSON);

  it('should decodePolyline correctly', () => {
    const resultPath = decodePolyline(encodedPolyline);
    expect(resultPath).toEqual(path);
  });

  it('should getPointArrayBounds correctly', () => {
    const resultBounds = getPointArrayBounds(path);
    expect(resultBounds).toEqual(bounds);
  });

  it('should getEncodedPolylineBounds correctly', () => {
    const resultBounds = getEncodedPolylineBounds(encodedPolyline);
    expect(resultBounds).toEqual(bounds);
  });

  it('should getEncodedPolylineCenter correctly', () => {
    const resultCenter = getEncodedPolylineCenter(encodedPolyline);
    expect(resultCenter).toEqual(polylineCenter);
  });
});
